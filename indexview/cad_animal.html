
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title> Control Herd | Animal</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/mycss.css" rel="stylesheet">
        <link href="css/login.css" rel="stylesheet">

        <meta name="author" content="">
        <!--script src="js/ajax.js"></script-->
        <!--script src="js/bootstrap.js"></script-->
        <script type="text/javascript">
            var nome;
            var telefone;
            var email;
            function enviar() {

                nome = document.getElementById("txtNome").value;
                telefone = document.getElementById("txtTelefone").value;
                email = document.getElementById("txtEmail").value;

                var texto = "Nome: " + nome + "; Telefone: " + telefone + "; Email: " + email; // como quiser formatar

                console.log(texto);
                inserir();

                return false;

            }

            function editar(evento) {
                
                var nome = document.getElementById("txtNome").value;
                var telefone = document.getElementById("txtTelefone").value;
                var email = document.getElementById("txtEmail").value;

                email.value = "dfdd";
                
                var texto   = "Nome: " + nome + "; Telefone: " + telefone + "; Email: " + email; // como quiser formatar

                console.log(texto);

                return false;

            }

            // Abrindo o banco de dados
            var request = window.indexedDB.open("DB_GadoOn", 4);

            request.onsuccess = function(event) {
                // Fazer algo com request.result!
                var db = request.result;
                inserir(db);
            };

            // Este evento é implementado somente em navegadores mais recentes
            //EXECUTA SOMENTE UMA VEZ
            request.onupgradeneeded = function(event) {
                var db = event.target.result;

                // Cria um objectStore para conter a informação sobre nossos clientes. Nós vamos
                // usar "ssn" como key path porque sabemos que é único;
                var objectStore = db.createObjectStore("clientes", {keyPath: "ssn"});

                // Cria um índice para buscar clientes pelo nome. Podemos ter nomes
                // duplicados, então não podemos usar como índice único.
                objectStore.createIndex("nome", "nome", {unique: false});

                // Cria um índice para buscar clientes por email. Queremos ter certeza
                // que não teremos 2 clientes com o mesmo e-mail;
                objectStore.createIndex("email", "email", {unique: true});

//                // Usando transação oncomplete para afirmar que a criação do objectStore 
//                // é terminada antes de adicionar algum dado nele.
//                objectStore.transaction.oncomplete = function(event) {
//                    // Armazenando valores no novo objectStore.
//                    var clientesObjectStore = db.transaction("clientes", "readwrite").objectStore("clientes");
//                    for (var i in DadosClientes) {
//                        clientesObjectStore.add(DadosClientes[i]);
//                    }
//                }


            };
            //inserir();
            listarTodos();
            buscar();
           
            function inserir( db) {

                //var dbRequest = window.indexedDB.open('DB_GadoOn', 4);
                //dbRequest.onsuccess = function(event) {
                  //  var db = dbRequest.result;
                    //var db = event.target.result;

                    var myTransaction = db.transaction(["clientes"], "readwrite");
                    var myObjectStore = myTransaction.objectStore("clientes");

                    var inserir = myObjectStore.add({ssn: nome, nome: nome, idade: 18, email: "ze@company.com"});

                //};
            };
            

            function listarTodos() {

                var dbRequest = window.indexedDB.open('DB_GadoOn', 4);
                dbRequest.onsuccess = function(event) {
                    var db = dbRequest.result;
                    var db = event.target.result;
                    //abre a transação com o nome do armazem de dados e somente leitura
                    var myTransaction = db.transaction(["clientes"], "readonly");
                    var myObjectStore = myTransaction.objectStore("clientes");

                    var cursor = myObjectStore.openCursor();

                    cursor.addEventListener("success", mostraTodosDados, false);

                };
            };

            function buscar() {

                var dbRequest = window.indexedDB.open('DB_GadoOn', 4);
                dbRequest.onsuccess = function(event) {
                    var db = dbRequest.result;
                    var db = event.target.result;
                    //abre a transação com o nome do armazem de dados e somente leitura
                    var myTransaction = db.transaction(["clientes"], "readonly");
                    var myObjectStore = myTransaction.objectStore("clientes");

                    var request = myObjectStore.get("111111111");
                    request.onerror = function(event) {
                        // Tratar erro!
                    };
                    request.onsuccess = function(event) {
                        // Fazer algo com request.result!
                        alert("O nome do SSN 444-44-4444 é " + request.result.nome);
                        //alert("A idade do SSN 444-44-4444 é " + request.result.idade);
                        //alert("A email do SSN 444-44-4444 é " + request.result.email);
                    };
                };
            };

            function mostraTodosDados(e) {
                var cursor = e.target.result;
                if (cursor) {
                    console.log(cursor.value.ssn);
                    console.log(cursor.value.nome);
                    console.log(cursor.value.email);
                    console.log(cursor.value.idade);
                    cursor.continue();
                }
            }
            ;


        </script>



        <!--[if lt IE 9]>
            <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"></script>
        <![endif]-->
        <!--[if lt IE 9]>
            <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"></script>
        <![endif]-->

        <link rel="shortcut icon" href="images/icon-superior.gif" >

    </head>

    <body class="">
        <!--TOPO INICIO-->
        <div class="navbar navbar-default navbar-static-top">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span>
                    <span class="icon-bar"></span><span class="icon-bar"></span>
                </button><a class="navbar-brand" href="index.php">Control Herd</a>
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="">
                        <a href="">Principal</a>
                    </li>
                    <li>
                        <a href="">Animais</a>
                    </li>

                    <li>
                        <a href="">Veterinário</a>
                    </li>

                    <li>
                        <a href="">Vacinas</a>
                    </li>
                </ul>
            </div>
        </div><!--FIM TOPO-->


        <!--CORPO-->
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <section id ="form">

                        <h4>Novo Animal</h4>
                        <form class="form" method="POST">
                            <label for="cpNomeEmpresa">Nome</label>
                            <input class="form-control input-required" type="text" name="cpNomeEmpresa" id="txtNome" value="" />
                            <label for="cpEmail">Email</label>
                            <input class="form-control input-required" type="text" name="cpEmail" id="txtEmail" value="" />
                            <label for="cpTelefone">Telefone</label>
                            <input class="form-control input-required" type="text" name="cpTelefone" id="txtTelefone" value="" />
                            <button class="btn" type="submit" onclick="return editar()">Cadastrar</button>

                        </form>
                    </section> 
                </div>
            </div>
        </div>


        <!--FIM CORPO-->

        <!---RODAPÉ-->
        <div class="col col-md-12"><hr></div>

        <p class="text-center">&copy; W-Soluções -  Todos os Direitos Reservados 2013
            <br>
            Contato: (32)3281-3064 - (32)84074824

        </p>

    </body>

</html>